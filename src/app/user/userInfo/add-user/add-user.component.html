<div class="modal-content ">
  <div class="modal-header">
     <h1 class="modal-title mb-0 pl-2" *ngIf="mode == 'create'">Add User</h1>
     <h1 class="modal-title mb-0 pl-2" *ngIf="mode == 'update'">Update User</h1>
     <button type="button" class="close" data-dismiss="modal" aria-label="Close" id="closePopupUser" (click)="onClose()">
     <span aria-hidden="true">&times;</span>
     </button>
  </div>
  <form role="form" [formGroup]="form" (submit)="onSave()">
  <div class="box-body" *ngIf="isLoadingUpdate">
     <mat-spinner class="mx-auto"></mat-spinner>
  </div>
  <div class="modal-body ct_overflow_hidden" *ngIf="!isLoadingUpdate">
     <div class="box-body">
        <figure class="position-relative overflow-hidden main-img-profile my-0" (click)="filePicker.click()">
           <img [src]="imagePreview" alt="" class="rounded-circle border h-100 w-100 rounded-circle border img-fluid" style="object-fit: cover;">
           <input type="file" class="d-none" accept="image/*" (change)="onImagePicked($event)" #filePicker >
           <div class="position-absolute rounded-circle bg-white border img-button-profile">
              <i class="fa fa-camera font-size-14"></i>
           </div>
        </figure>
        <div class="row mt-5">
          <div class="col-md-6">
            <div class="form-group" [ngClass]="{'has-error': form.get('first_name').invalid  && form.get('first_name').touched}">
              <label>First Name</label>
              <input type="text" class="form-control" placeholder="Enter first name" formControlName="first_name" />
              <span class="help-block" *ngIf="form.get('first_name').invalid  && form.get('first_name').touched">
              Please enter a first name.
              </span>
           </div>
          </div>
          <div class="col-md-6">
            <div class="form-group" [ngClass]="{'has-error': form.get('last_name').invalid  && form.get('last_name').touched}">
              <label>Last Name</label>
              <input type="text" class="form-control" placeholder="Enter last name" formControlName="last_name" />
              <span class="help-block" *ngIf="form.get('last_name').invalid  && form.get('last_name').touched">
              Please enter a last name.
              </span>
            </div>
          </div>
          <div class="col-md-6">
            <div class="form-group" [ngClass]="{'has-error': form.get('email').invalid  && form.get('email').touched}">
              <label>Email</label>
              <input type="text" class="form-control" placeholder="Enter email" formControlName="email" />
              <span class="help-block" *ngIf="form.get('email').invalid  && form.get('email').touched">
              Please enter a email.
              </span>
            </div>
          </div>
          <div class="col-md-6">
            <div class="form-group" [ngClass]="{'has-error': form.get('unique_id').invalid  && form.get('unique_id').touched}">
              <label>Unique Id</label>
              <input type="text" class="form-control" placeholder="Enter Unique Id" formControlName="unique_id" />
              <span class="help-block" *ngIf="form.get('unique_id').invalid  && form.get('unique_id').touched">
              Please enter a Unique Id.
              </span>
            </div>
          </div>
          <div class="col-md-6">
            <div class="form-group" [ngClass]="{'has-error': form.get('dob').invalid  && form.get('dob').touched}">
              <label>Date Of Birth</label>
              <input type="date" data-date-format="Y-m-d" class="form-control" placeholder="Enter dob" formControlName="dob" />
              <span class="help-block" *ngIf="form.get('dob').invalid  && form.get('dob').touched">
              Please enter a dob.
              </span>
            </div>
          </div>
          <div class="col-md-6">
            <div class="form-group" [ngClass]="{'has-error': form.get('mobile_number').invalid  && form.get('mobile_number').touched}">
              <label>Mobile Number</label>
              <input type="text" class="form-control" placeholder="Enter mobile number" formControlName="mobile_number" />
              <span class="help-block" *ngIf="form.get('mobile_number').invalid  && form.get('mobile_number').touched">
              Please enter a mobile number.
              </span>
            </div>
          </div>
          <div class="col-md-6">
            <div class="form-group" [ngClass]="{'has-error': form.get('kin_name').invalid  && form.get('kin_name').touched}">
              <label>Next of kin</label>
              <input type="text" class="form-control" placeholder="Enter next of kin" formControlName="kin_name" />
              <span class="help-block" *ngIf="form.get('kin_name').invalid  && form.get('kin_name').touched">
              Please enter a next of kin.
              </span>
            </div>
          </div>
          <div class="col-md-6">
            <div class="form-group" [ngClass]="{'has-error': form.get('city').invalid  && form.get('city').touched}">
              <label>City</label>
              <input type="text" class="form-control" placeholder="Enter city" formControlName="city" />
              <span class="help-block" *ngIf="form.get('city').invalid  && form.get('city').touched">
              Please enter a city.
              </span>
            </div>
          </div>
          <div class="col-md-6">
            <div class="form-group" [ngClass]="{'has-error': form.get('home_number').invalid  && form.get('home_number').touched}">
              <label>Home Number</label>
              <input type="text" class="form-control" placeholder="Enter home number" formControlName="home_number" />
              <span class="help-block" *ngIf="form.get('home_number').invalid  && form.get('home_number').touched">
              Please enter a home number.
              </span>
            </div>
          </div>
          <div class="col-md-6">
            <div class="form-group" [ngClass]="{'has-error': form.get('address_line_1').invalid  && form.get('address_line_1').touched}">
              <label>Address Line 1</label>
              <input type="text" class="form-control" placeholder="Enter address line 1" formControlName="address_line_1" />
              <span class="help-block" *ngIf="form.get('address_line_1').invalid  && form.get('address_line_1').touched">
              Please enter a address line 1.
              </span>
            </div>
          </div>
          <div class="col-md-6">
            <div class="form-group" [ngClass]="{'has-error': form.get('address_line_2').invalid  && form.get('address_line_2').touched}">
              <label>Address Line 2</label>
              <input type="text" class="form-control" placeholder="Enter address line 2" formControlName="address_line_2" />
              <span class="help-block" *ngIf="form.get('address_line_2').invalid  && form.get('address_line_2').touched">
              Please enter a address line 2.
              </span>
            </div>
          </div>
          <div class="col-md-6">
            <div class="form-group" [ngClass]="{'has-error': form.get('emergency_number').invalid  && form.get('emergency_number').touched}">
              <label>Emergency Number</label>
              <input type="text" class="form-control" placeholder="Enter emergency number" formControlName="emergency_number" />
              <span class="help-block" *ngIf="form.get('emergency_number').invalid  && form.get('emergency_number').touched">
              Please enter a emergency number.
              </span>
            </div>
          </div>
          <div class="col-md-6">
            <div class="form-group" [ngClass]="{'has-error': form.get('kin_number').invalid  && form.get('kin_number').touched}">
              <label>Next of kin Contact Number</label>
              <input type="text" class="form-control" placeholder="Enter kin contact number" formControlName="kin_number" />
              <span class="help-block" *ngIf="form.get('kin_number').invalid  && form.get('kin_number').touched">
              Please enter a kin contact number.
              </span>
            </div>
          </div>
          <div class="col-md-6">
            <div class="form-group" [ngClass]="{'has-error': form.get('post_code').invalid  && form.get('post_code').touched}">
              <label>Post Code</label>
              <input type="text" class="form-control" placeholder="Enter post code" formControlName="post_code" />
              <span class="help-block" *ngIf="form.get('post_code').invalid  && form.get('post_code').touched">
              Please enter a post code.
              </span>
            </div>
          </div>
          <div class="col-md-6">
            <div class="form-group" [ngClass]="{'has-error': form.get('employement_type')?.invalid  && form.get('employement_type').touched}">
              <label>Employement Type</label>
              <select class="form-control" formControlName="employement_type">
                <option>Select employement type</option>
                <option value='1'>Full Time</option>
                <option value='2'>Part Time</option>
                <option value='3'>Self employed</option>
                <option value='4'>Student</option>
                <option value='5'>Unemployed</option>
              </select>
              <span class="help-block" *ngIf="form.get('employement_type')?.invalid  && form.get('employement_type').touched">
                Please enter a Loan Type.
              </span>
            </div>
          </div>

          <div class="col-md-6">
            <div class="form-group" [ngClass]="{'has-error': form.get('created_at').invalid  && form.get('created_at').touched}">
              <label>Created On</label>
              <input type="date" data-date-format="Y-m-d" class="form-control" placeholder="Enter Created On" formControlName="created_at" />
              <span class="help-block" *ngIf="form.get('created_at').invalid  && form.get('created_at').touched">
              Please enter a dob.
              </span>
            </div>
          </div>
        </div>
     </div>
  </div>
  <div class="modal-footer">
     <button type="button" class="btn btn-secondary pull-left" data-dismiss="modal" (click)="onClose()">Close</button>
     <button type="submit" class="btn btn-primary" [disabled]="isLoading">
     <span *ngIf="!isLoading">
     <span *ngIf="mode === 'create'">Add</span>
     <span *ngIf="mode === 'update'">Update</span>
     </span>
     <span *ngIf="isLoading">
     <i class="fa fa-refresh fa-spin"></i>
     </span>
     </button>
  </div>
  </form>
</div>
